{% extends 'layout.html' %}
{% block content %}
    <h1>Afregn</h1>

    <h3>Indsæt penge</h3>
    <form method="POST" action="/deposit">
        {{ TransactionForm.hidden_tag() }}
        <div class="form-field">
            {{ TransactionForm.member(autofocus=True) }}
        </div>
        <div class="form-field">
            {{ TransactionForm.deposit.label }}
            {{ TransactionForm.deposit(**{'x-model.number': 'depositAmount'}) }}
        <div class="form-field">
            {{ TransactionForm.pay.label }}
            {{ TransactionForm.pay(**{'x-model.number': 'payAmount'}) }}
        </div>
        <div class="form-field">
            {{ TransactionForm.submit(class="submit-button")}}
        </div>
    </form>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Get the ID WTForms assigns (inspect element if unsure, usually the field name)
        const memberSelectElement = document.getElementById('member'); // Assuming your field name is 'member'

        if (memberSelectElement) {
            const choices = new Choices(memberSelectElement, {
                // --- Optional configurations ---
                searchEnabled: true,
                placeholder: true,
                removeItemButton: true,
                itemSelectText: 'Select',
                shouldSort: false,
                searchResultLimit: 10,
                placeholderValue: 'Søg på medlem',
            });
        }
    }) 
    </script>
{% endblock %}